---
layout: post
title: "An Interesting Probability Problem: N Persons in a Circle"
date: 2012-10-16 17:00
comments: true
categories: [Math, Probability]
---

今天看到了一道有趣的题目：

> 若n个人站成一排，其中有A，B两人，问夹在A和B之间恰好有r个人的概率是多少？如果他们不是站在一排，而是站在一圈，那结果又是如何呢？

对于前一个问，解起来并不是太难，只要细心一点一般不会做错。其中n个人排成一排，总的排列数是$n!$，然后考虑为了促成上面描述的状况经过了什么步骤。

1. 首先当然是从n个人里面选出r个(记住除去A和B)，让其排在A和B的中间，注意，选出r个人以后还得对其进行排列，所以有

    $$
    \dbinom{n-2}r r!
    $$

2. 然后要对剩下的人进行排列，于是有$(n-r-2)!$种排法，排完以后还必须将他们分成两部分排在A的左边和B的右边，这样就有$(n-r-1)$种分法，极端情况是全部排在一边。这样与步骤1结合起来，就有下面的排列数：

    $$
    \dbinom{n-2}r r! (n-r-1)!
    $$

3. 最后，将A和B位置交换又能得到一组对称的排列，所以总概率为：

    $$
    P = \frac{2 \dbinom{n-2}r r! (n-r-1)!}{n!}
    $$

稍微将其化简，有：

$$
\begin{align}
P 
    &= \frac{2 \dbinom{n-2}r r! (n-r-1)!}{n!} \\
    &= \frac{2r!(n-r-1)!}{n!} \frac{(n-2)!}{r!(n-r-2)!} \\
    &= \frac{2(n-r-1)}{n(n-1)}
\end{align}
$$

接着考虑第二问。在第二问中，n个人再也不是排成一排了，所以其总排列数会有所变化。观察下面的排列：

$$
p_1, p_2, p_3, \dotsc p_n
$$

注意到，当n个人排成一圈以后，本来在排成一排的时候出现的排列会重复，比如：

$$
p_2, p_3, \dotsc p_n, p_1 \\
p_3, \dotsc p_n, p_1, p_2
$$

等等的排列都是重复的，重复次数为n。比如排成一个圈以后排列数是P，那么这P个排列中，每一个排列都会在排成一排的情况中衍生出n种不同的排列，所以排成一个圈的排列数刚好是排成一排的排列数的$1/n$，所以其总排列数为$(n-1)!$。


